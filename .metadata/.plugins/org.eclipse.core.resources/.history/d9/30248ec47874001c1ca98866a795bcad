package com.challenge.crawler.service;

import java.util.ArrayList;
import java.util.List;
import java.util.stream.Collectors;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.challenge.crawler.model.Automobile;
import com.challenge.crawler.repo.AutomobileRepository;

@Service
public class MainService {
	
	@Autowired
	AutomobileRepository autoRepo;
	
	
	public void save(Automobile auto)
	{
		this.autoRepo.save(auto);
	}
	
	public void save(List<Automobile> autoList)
	{
		this.autoRepo.saveAll(autoList);
	}
	
	public List<Automobile> fetchAllAutombiles()
	{
		List<Automobile> autoList = this.autoRepo.findAll();
		return autoList;
	}
	
	public List<String> fetchNames()
	{
		List<String> autoNamesList = new ArrayList<>();
		List<Automobile> autoList = this.autoRepo.findAll();
		autoNamesList = autoList.stream().map(x -> x.getName()).collect(Collectors.toList());
		return autoNamesList;
	}
	
	/*
	 * private List<AutomobileInfo> buildAutomobileDTO(List<Automobile> autoList) {
	 * List<AutomobileInfo> autoInfoList = null; if(autoList != null &&
	 * autoList.size() > 0) { autoInfoList = autoList.stream().map(x -> {
	 * AutomobileInfo a = new AutomobileInfo(); a.setAssembly(null);
	 * a.setManufacturer(null); a.setName(null); return a;
	 * }).collect(Collectors.toList()); }
	 * 
	 * return autoInfoList; }
	 */

}
